/**
 * objectives for this branch
 * pull modules out of the task class
 */

buildscript{
	repositories {
		maven {
			url "https://plugins.gradle.org/m2/"
    	}
	}
	
	dependencies {
		classpath "com.gradle.publish:plugin-publish-plugin:0.9.1"
	  }
}

plugins {
	id 'groovy'
	id 'idea'
	id 'maven'
	id 'com.jfrog.artifactory' version '3.1.1'
  }
  
  apply plugin: 'com.gradle.plugin-publish'
  
  
  def versionNumber = '0.1'
  
  pluginBundle {
	website = 'http://www.juanmendez.info'
	description = 'Simple test how to work with gradle plugins'
  
	plugins {
	  presentationPlugin {
		id = 'info.juanmendez.weather.plugin'
		displayName = 'Weather plugin'
		tags = ['weather', 'learn gradle plugin']
		version = versionNumber
	  }
	}
  }
  
  
  version = versionNumber
  group = 'info.juanmendez'
  def artifact = 'weather-plugin'
  
  
  repositories {
	jcenter()
  }
  
  dependencies {
	compile 'org.codehaus.groovy:groovy-all:2.3.10'
	compile gradleApi()
	compile "org.codehaus.groovy.modules.http-builder:http-builder:0.7.2"
  }
  
  jar {
	  baseName = artifact
	}
	
	
	task wrapper(type: Wrapper) {
	  gradleVersion = '2.7'
	}
	
	
	task sourceJar(type: Jar) {
	  description = 'An archive of the source code for Maven Central'
	  baseName = artifact
	  classifier = 'sources'
	  from sourceSets.main.groovy
	}
	
	
	task groovydocJar(type: Jar, dependsOn: groovydoc) {
	  description = 'An archive of the GroovyDocs for Maven Central'
	  baseName = artifact
	  classifier = 'javadoc'
	  from fileTree(groovydoc.destinationDir)
	}